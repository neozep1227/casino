<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Casino Game Logic Demo - Seminar Edition</title>
  <script src="https://cdn.tailwindcss.com "></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0f172a;
      color: white;
    }
    .slot {
      font-size: 2rem;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #facc15;
      background: #1e293b;
      margin: 4px;
      border-radius: 8px;
      animation: spin 0.6s infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

<div class="min-h-screen bg-gradient-to-b from-gray-900 to-black text-white">
  <!-- Header -->
  <header class="bg-black/70 backdrop-blur-md border-b border-yellow-500/30 shadow-lg sticky top-0 z-10">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-yellow-400">Casino Game Logic Demo</h1>
      <button onclick="toggleAdmin()" class="text-sm bg-yellow-500 text-black px-3 py-1 rounded">Toggle Admin Mode</button>
    </div>
  </header>

  <!-- Balance -->
  <div class="container mx-auto px-4 py-4 flex justify-end">
    <div class="text-right">
      <p class="text-sm text-gray-400">Balance</p>
      <p id="balanceDisplay" class="text-2xl font-bold text-yellow-400">$500.00</p>
    </div>
  </div>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">

    <!-- Admin Panel -->
    <div id="adminPanel" class="hidden mb-6">
      <div class="bg-gray-800/70 p-4 rounded border border-yellow-500/30">
        <h3 class="text-lg font-bold mb-2">üìä Admin Panel</h3>
        <p id="adminStats"></p>
      </div>
    </div>

    <!-- Slots Game -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold mb-6">üé∞ Slots Game</h2>

      <div id="slotMachine" class="flex justify-center mb-6">
        <div class="slot">?</div>
        <div class="slot">?</div>
        <div class="slot">?</div>
      </div>

      <div class="flex items-center gap-4 justify-center mb-4">
        <input type="number" id="slotsBet" placeholder="Bet amount" min="1" max="500"
               class="w-32 px-3 py-2 bg-gray-700 border border-gray-600 rounded" value="10">
        <button onclick="playSlots()" class="bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded font-semibold">
          Spin
        </button>
      </div>

      <p id="slotsResult" class="text-center text-lg mt-4"></p>
      <p id="slotsWinChance" class="text-center text-sm text-gray-400 mt-2"></p>
    </section>

    <!-- Roulette Game -->
    <section>
      <h2 class="text-3xl font-bold mb-6">üé≤ Roulette Game</h2>

      <div class="bg-gray-800/70 p-6 rounded-xl border border-yellow-500/30 shadow-lg mb-6">
        <div class="mb-4">
          <label class="block mb-2">Bet on:</label>
          <select id="rouletteBetType" class="bg-gray-700 px-3 py-2 rounded w-full">
            <option value="red">Red</option>
            <option value="black">Black</option>
            <option value="number">Number (0-36)</option>
          </select>
          <input id="rouletteNumber" type="number" min="0" max="36" placeholder="Enter number" class="mt-2 bg-gray-700 px-3 py-2 rounded w-full hidden">
        </div>
        <div class="flex items-center gap-4 mb-4">
          <input type="number" id="rouletteBet" placeholder="Bet amount" min="1" max="500" class="w-32 px-3 py-2 bg-gray-700 border border-gray-600 rounded" value="10">
          <button onclick="playRoulette()" class="bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded font-semibold">Spin</button>
        </div>
        <p id="rouletteResult" class="text-center"></p>
        <p id="rouletteWinChance" class="text-center text-sm text-gray-400"></p>
      </div>
    </section>

    <!-- Reset Button -->
    <div class="text-center mt-8">
      <button onclick="resetGame()" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded text-sm">
        üîÅ Reset Game (For Demo)
      </button>
    </div>

  </main>

  <!-- Footer -->
  <footer class="bg-black/70 backdrop-blur-md border-t border-yellow-500/30 py-6 mt-12">
    <div class="container mx-auto px-4 text-center text-sm text-gray-500">
      Demo for Seminar - Game Logic & Player Engagement
    </div>
  </footer>
</div>

<!-- Audio -->
<audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/coin_pickup.ogg "></audio>
<audio id="lossSound" src="https://actions.google.com/sounds/v1/cartoon/whip_whoosh.ogg "></audio>

<script>
  // Load from localStorage
  let balance = parseFloat(localStorage.getItem("balance")) || 500;
  let playerWins = parseInt(localStorage.getItem("playerWins")) || 0;
  let sessionCount = parseInt(localStorage.getItem("sessionCount")) || 0;

  function updateBalance() {
    document.getElementById("balanceDisplay").textContent = `$${balance.toFixed(2)}`;
    localStorage.setItem("balance", balance);
  }

  function getWinChance() {
    if (sessionCount <= 3) return 0.4;
    if (playerWins >= 10) return 0.02;
    if (playerWins >= 5) return 0.03;
    return 0.05;
  }

  function updateAdminPanel() {
    const adminPanel = document.getElementById("adminPanel");
    const adminStats = document.getElementById("adminStats");
    if (adminPanel.classList.contains("hidden")) return;

    adminStats.innerHTML = `
      <strong>Session Count:</strong> ${sessionCount}<br>
      <strong>Total Wins:</strong> ${playerWins}<br>
      <strong>Current Win Chance:</strong> ${(getWinChance() * 100).toFixed(2)}%
    `;
  }

  function toggleAdmin() {
    const panel = document.getElementById("adminPanel");
    panel.classList.toggle("hidden");
    updateAdminPanel();
  }

  function playSlots() {
    const bet = parseInt(document.getElementById("slotsBet").value);
    if (isNaN(bet) || bet <= 0 || bet > balance) {
      alert("Invalid bet amount");
      return;
    }

    sessionCount++;
    localStorage.setItem("sessionCount", sessionCount);

    const symbols = ['üçí', 'üçã', 'üçä', 'üçá', '‚≠ê'];
    const reels = [];
    const resultText = document.getElementById("slotsResult");
    const winChanceText = document.getElementById("slotsWinChance");
    const reelsDiv = document.querySelectorAll(".slot");

    // Reset animation
    reelsDiv.forEach(r => r.style.animation = "spin 0.6s infinite");

    // Calculate win chance
    const winChance = getWinChance();
    const win = Math.random() < winChance;

    setTimeout(() => {
      if (win) {
        const symbol = symbols[Math.floor(Math.random() * symbols.length)];
        reels[0] = reels[1] = reels[2] = symbol;
        balance += bet * 10;
        playerWins++;
        localStorage.setItem("playerWins", playerWins);
        resultText.textContent = `üéâ JACKPOT! You won $${bet * 10}`;
        document.getElementById("winSound").play();
      } else {
        reels[0] = symbols[Math.floor(Math.random() * symbols.length)];
        reels[1] = symbols[Math.floor(Math.random() * symbols.length)];
        reels[2] = symbols[Math.floor(Math.random() * symbols.length)];
        balance -= bet;
        resultText.textContent = `üò¢ You lost $${bet}`;
        document.getElementById("lossSound").play();
      }

      // Update reel text
      reels.forEach((symbol, i) => {
        reelsDiv[i].textContent = symbol;
      });

      localStorage.setItem("balance", balance);
      updateBalance();
      winChanceText.textContent = `Current Win Chance: ${(winChance * 100).toFixed(2)}%`;
      updateAdminPanel();
    }, 1000);
  }

  function playRoulette() {
    const betType = document.getElementById("rouletteBetType").value;
    const betAmount = parseInt(document.getElementById("rouletteBet").value);
    const chosenNumber = parseInt(document.getElementById("rouletteNumber").value);
    const resultText = document.getElementById("rouletteResult");
    const winChanceText = document.getElementById("rouletteWinChance");

    if (isNaN(betAmount) || betAmount <= 0 || betAmount > balance) {
      alert("Invalid bet amount");
      return;
    }

    sessionCount++;
    localStorage.setItem("sessionCount", sessionCount);

    const winChance = getWinChance();
    const winningNumber = Math.floor(Math.random() * 37);

    let win = false;

    if (betType === "red") {
      win = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(winningNumber);
    } else if (betType === "black") {
      win = [2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35].includes(winningNumber);
    } else if (betType === "number") {
      win = winningNumber === chosenNumber;
    }

    if (win) {
      balance += betAmount * (betType === "number" ? 35 : 2);
      playerWins++;
      localStorage.setItem("playerWins", playerWins);
      resultText.textContent = `üéâ You won! The number was ${winningNumber}.`;
      document.getElementById("winSound").play();
    } else {
      balance -= betAmount;
      resultText.textContent = `üò¢ You lost. The number was ${winningNumber}.`;
      document.getElementById("lossSound").play();
    }

    localStorage.setItem("balance", balance);
    updateBalance();
    winChanceText.textContent = `Current Win Chance: ${(winChance * 100).toFixed(2)}%`;
    updateAdminPanel();
  }

  function resetGame() {
    if (confirm("Reset all game data? This is for demo purposes only.")) {
      localStorage.removeItem("balance");
      localStorage.removeItem("playerWins");
      localStorage.removeItem("sessionCount");
      balance = 500;
      playerWins = 0;
      sessionCount = 0;
      updateBalance();
      updateAdminPanel();
      document.getElementById("slotsResult").textContent = "";
      document.getElementById("rouletteResult").textContent = "";
    }
  }

  // Event listener for bet type change
  document.getElementById("rouletteBetType").addEventListener("change", function () {
    const input = document.getElementById("rouletteNumber");
    input.classList.toggle("hidden", this.value !== "number");
  });

  // Initial Setup
  updateBalance();
  updateAdminPanel();
</script>

</body>
</html>
