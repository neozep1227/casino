<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Casino Game Logic Demo</title>
  <script src="https://cdn.tailwindcss.com "></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0f172a;
      color: white;
    }
    .slot {
      font-size: 2rem;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #facc15;
      background: #1e293b;
      margin: 4px;
      border-radius: 8px;
      animation: spin 0.6s infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

<div class="min-h-screen bg-gradient-to-b from-gray-900 to-black text-white">
  <!-- Header -->
  <header class="bg-black/70 backdrop-blur-md border-b border-yellow-500/30 shadow-lg sticky top-0 z-10">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-yellow-400">Casino Game Logic Demo</h1>
    </div>
  </header>

  <!-- Balance -->
  <div class="container mx-auto px-4 py-4 flex justify-end">
    <div class="text-right">
      <p class="text-sm text-gray-400">Balance</p>
      <p id="balanceDisplay" class="text-2xl font-bold text-yellow-400">$500.00</p>
    </div>
  </div>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <section class="text-center">
      <h2 class="text-3xl font-bold mb-6">ðŸŽ° Slots Game</h2>

      <div id="slotMachine" class="flex justify-center mb-6">
        <div class="slot">?</div>
        <div class="slot">?</div>
        <div class="slot">?</div>
      </div>

      <div class="flex items-center gap-4 justify-center mb-4">
        <input type="number" id="slotsBet" placeholder="Bet amount" min="1" max="500"
               class="w-32 px-3 py-2 bg-gray-700 border border-gray-600 rounded" value="10">
        <button onclick="playSlots()" class="bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded font-semibold">
          Spin
        </button>
      </div>

      <p id="slotsResult" class="text-center text-lg mt-4"></p>
      <p id="playerStats" class="text-sm text-gray-400 mt-2"></p>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-black/70 backdrop-blur-md border-t border-yellow-500/30 py-6 mt-12">
    <div class="container mx-auto px-4 text-center text-sm text-gray-500">
      Demo for Seminar - Game Logic & Player Engagement
    </div>
  </footer>
</div>

<script>
  // Load from localStorage
  let balance = parseFloat(localStorage.getItem("balance")) || 500;
  let playerWins = parseInt(localStorage.getItem("playerWins")) || 0;
  let sessionCount = parseInt(localStorage.getItem("sessionCount")) || 0;

  function updateBalance() {
    document.getElementById("balanceDisplay").textContent = `$${balance.toFixed(2)}`;
    localStorage.setItem("balance", balance);
  }

  function updateStatsDisplay() {
    const stats = document.getElementById("playerStats");
    stats.textContent = `Total Wins: ${playerWins} | Sessions: ${sessionCount}`;
  }

  function getWinChance() {
    if (sessionCount <= 3) return 0.4; // ðŸŸ¢ New player: 40%
    if (playerWins >= 10) return 0.02; // ðŸ”´ Frequent winner: 2%
    if (playerWins >= 5) return 0.03; // ðŸŸ  Moderate winner: 3%
    return 0.05; // Default: 5%
  }

  function playSlots() {
    const bet = parseInt(document.getElementById("slotsBet").value);
    if (isNaN(bet) || bet <= 0 || bet > balance) {
      alert("Invalid bet amount");
      return;
    }

    sessionCount++;
    localStorage.setItem("sessionCount", sessionCount);

    const symbols = ['ðŸ’', 'ðŸ‹', 'ðŸŠ', 'ðŸ‡', 'â­'];
    const reels = [];
    const resultText = document.getElementById("slotsResult");
    const reelsDiv = document.querySelectorAll(".slot");

    // Reset animation
    reelsDiv.forEach(r => r.style.animation = "spin 0.6s infinite");

    // Calculate win chance
    const winChance = getWinChance();
    const win = Math.random() < winChance;

    setTimeout(() => {
      if (win) {
        const symbol = symbols[Math.floor(Math.random() * symbols.length)];
        reels[0] = reels[1] = reels[2] = symbol;
        balance += bet * 10;
        playerWins++;
        localStorage.setItem("playerWins", playerWins);
        resultText.textContent = `ðŸŽ‰ JACKPOT! You won $${bet * 10}`;
      } else {
        reels[0] = symbols[Math.floor(Math.random() * symbols.length)];
        reels[1] = symbols[Math.floor(Math.random() * symbols.length)];
        reels[2] = symbols[Math.floor(Math.random() * symbols.length)];
        balance -= bet;
        resultText.textContent = `ðŸ˜¢ You lost $${bet}`;
      }

      // Update reel text
      reels.forEach((symbol, i) => {
        reelsDiv[i].textContent = symbol;
      });

      localStorage.setItem("balance", balance);
      updateBalance();
      updateStatsDisplay();
    }, 1000);
  }

  // Initial Setup
  updateBalance();
  updateStatsDisplay();
</script>

</body>
</html>
